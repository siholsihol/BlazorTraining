@page "/SAB00900"
@using R_BlazorFrontEnd.Controls.Tab
@inherits R_Page
@attribute [R_Page(Title = "Find With Conductor", ResourceId = "_Title")]
@* @attribute [R_Page(Title = "_Title")] *@

<R_TabStrip>
    <R_TabStripTab Title="Tab 1" >
        <R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Product Id</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_NumericTextBox @ref="_numericIdRef"
                                      @bind-Value="@ViewModel.Data.Id"
                                      R_ConductorSource="@_conductorRef"
                                      R_EnableAdd />
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Product Name</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_TextBox @ref="_productNameRef"
                        Id="txtName"
                               @bind-Value="@ViewModel.Data.Name"
                               R_ConductorSource="@_conductorRef"
                               R_EnableAdd
                               R_EnableEdit>
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Category</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_DropDownList @ref="@_dropdownCategoryRef"
                                    Data="@ViewModel.CategoryList"
                                    ValueField="@nameof(CategoryDTO.Id)"
                                    TextField="@nameof(CategoryDTO.Name)"
                                    @bind-Value="@ViewModel.Data.CategoryId"
                                    R_ConductorSource="@_conductorRef"
                                    R_EnableAdd
                                    R_EnableEdit />
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Price</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_NumericTextBox @bind-Value="@ViewModel.Data.Price"
                                      R_ConductorSource="@_conductorRef"
                                      R_EnableAdd
                                      R_EnableEdit 
                                      Decimals="2" />
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Release Date</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_DatePicker @ref="@_datePickerRef"
                                  Value="@ViewModel.ReleaseDate"
                                  R_ConductorSource="@_conductorRef"
                                  ValueChanged="((DateTime? value) => DatePicker_ValueChanged(value))"
                                  R_EnableAdd
                                  R_EnableEdit />
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Active</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_CheckBox @ref="@_checkboxActiveRef"
                                @bind-Value="@ViewModel.Data.Active"
                                R_ConductorSource="@_conductorRef"
                                R_EnableAdd
                                R_EnableEdit />
                </R_ItemLayout>
            </R_StackLayout>


            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Testing</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="4">
                    <R_TextBox Id="txtName"
                               @bind-Value="@ViewModel.TextBox1"
                               R_ConductorSource="@_conductorRef"
                               Enabled="@(_conductorRef.R_ConductorMode != R_BlazorFrontEnd.Enums.R_eConductorMode.Normal 
                                          && ViewModel.Data.Active)"
                    >
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                    <R_AddButton R_Conductor="@_conductorRef" />
                    <R_EditButton R_Conductor="@_conductorRef" />
                    <R_DeleteButton R_Conductor="@_conductorRef" />
                    <R_SaveButton R_Conductor="@_conductorRef" />
                    <R_CancelButton R_Conductor="@_conductorRef" />
                    <R_PrintButton R_Conductor="@_conductorRef" OnClick="OnClickPrint" TabIndex="10" />

                    <R_Find R_ConductorSource="@_conductorRef"
                            R_FindModel="@R_FindModel"
                            R_Before_Open_Find="@R_Before_Open_Find"
                            R_After_Open_Find="@R_After_Open_Find"
                            R_EnableOther>Find Product</R_Find>

                    <R_Lookup R_ConductorSource="@_conductorRef"
                              R_Before_Open_Lookup="@R_Before_Open_Lookup"
                              R_After_Open_Lookup="@R_After_Open_Lookup"
                              R_EnableOther>Lookup Product</R_Lookup>
            </R_StackLayout>

            <R_StackLayout Row>
                    <R_Popup R_ConductorSource="@_conductorRef"
                             R_Before_Open_Popup="@R_Before_Open_Popup"
                             R_After_Open_Popup="@R_After_Open_Popup"
                             R_EnableOther>Popup Product</R_Popup>

                    <R_Popup R_ConductorSource="@_conductorRef"
                             R_Before_Open_Popup="@R_Before_Open_Popup_From_Namespace"
                             R_After_Open_Popup="@R_After_Open_Popup_From_Namespace"
                             R_EnableOther>Popup Product From Namespace</R_Popup>
            </R_StackLayout>

            <R_StackLayout Row>
                    <R_Detail R_Before_Open_Detail="@R_Before_Open_Detail"
                              R_After_Open_Detail="@R_After_Open_Detail">
                        Detail
                    </R_Detail>

                    <R_Detail R_Before_Open_Detail="@R_Before_Open_Detail_From_Namespace"
                              R_After_Open_Detail="@R_After_Open_Detail_From_Namespace">
                        Detail From Namespace
                    </R_Detail>
            </R_StackLayout>

            <R_StackLayout Row>
                    <R_Button R_ConductorSource="@_conductorRef"
                              R_EnableOther OnClick="@popupButtonOnClick">Popup from button</R_Button>

                    <R_Button R_ConductorSource="@_conductorRef"
                              R_EnableOther OnClick="@lookupButtonOnClick">Lookup from button</R_Button>

                    <R_Button R_ConductorSource="@_conductorRef"
                              R_EnableOther OnClick="@buttonCloseOnClick">Close Program</R_Button>

            </R_StackLayout>
        </R_StackLayout>


    </R_TabStripTab>
    <R_TabStripTab Enabled="@(!_isInCRUDMode)" Title="Tab 2" >
        <R_TabPage R_After_Open_TabPage="R_After_Open_TabPage" R_Before_Open_TabPage="R_Before_Open_TabPage"></R_TabPage>
    </R_TabStripTab>
</R_TabStrip>


<R_PredefinedDock R_InstantiateDock="@R_InstantiateDock"
                  Title="Predefined Dock"
                  R_AfterOpenPredefinedDock="R_AfterOpenPredefinedDock" />

<R_Conductor @ref="@_conductorRef"
             R_ViewModel="@ViewModel"
             R_IsHeader 
             R_ServiceGetRecord="@Conductor_ServiceGetRecord" 
             R_Display="Conductor_Display" 
             R_ServiceSave="@Conductor_ServiceSave" 
             R_ServiceDelete="@Conductor_ServiceDelete" 

             R_DisableDeleteConfirmation="true"
             R_DisableCancelConfirmation="true";

             R_BeforeCancel="Conductor_BeforeCancel" 
             R_Validation="@Conductor_Validation" 
             R_Saving="@Conductor_Saving"

             R_AfterAdd="@Conductor_AfterAdd" 
             R_AfterDelete="@Conductor_AfterDelete"
             R_AfterSave="@Conductor_AfterSave" 

             R_SetAdd="Conductor_SetAddEdit"
             R_SetEdit="Conductor_SetAddEdit"
             R_SetOther="Conductor_SetOther"
             R_SetHasData="Conductor_SetHasData"
             
             R_CheckAdd="Conductor_CheckAdd"
             R_CheckEdit="Conductor_CheckEdit"
             R_CheckDelete="Conductor_CheckDelete"
             
             R_BeforeAdd="Conductor_BeforeAdd"
             R_BeforeEdit="Conductor_BeforeEdit"
             R_BeforeDelete="Conductor_BeforeDelete"  />

@*
1. R_GetEntity =>        R_ServiceGetRecord                                         + R_NotifyAll(NORMAL)                   + R_Display
2. Add =>                                     R_BeforeAdd                           + R_NotifyAll(ADD)      + R_AfterAdd    + R_Display
3. Edit =>               R_ServiceGetRecord + R_BeforeEdit                          + R_NotifyAll(EDIT)                     + R_Display
4. Delete =>             R_ServiceGetRecord + R_BeforeDelete   + R_ServiceDelete    + R_NotifyAll(DELETE)   + R_AfterDelete + R_Display
5. Save =>               R_Validation       + R_Saving         + R_ServiceSave      + R_NotifyAll(SAVE)     + R_AfterSave   + R_Display
6. Cancel =>                                  R_BeforeCancel                        + R_NotifyAll(CANCEL)                   + R_Display
7. R_SetCurrentData =>                                                              + R_NotifyAll(NORMAL)                   + R_Display
8. R_NotifyAll (NORMAL)     => R_CheckAdd R_CheckEdit R_CheckDelete R_CheckPrint
9. R_NotifyAll              => R_SetAdd R_SetEdit R_SetOther R_SetHasData
*@


@*
List Public Method dari R_Conductor yang bisa dipake
_conductorRef.R_GetEntity(loParam);
_conductorRef.R_GetCurrentData();
_conductorRef.R_SetCurrentData(loParam);

_conductorRef.Add();
_conductorRef.Edit();
_conductorRef.Delete();
_conductorRef.Save();
_conductorRef.Cancel();
*@