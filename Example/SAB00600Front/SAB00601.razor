@inherits R_Page
@attribute [R_Page(Title = "Batch Edit Grid")]
@using R_BlazorFrontEnd.Controls.Events

<R_StackLayout>
    <R_BatchEditGrid DataSource="@CustomerViewModel.CustomerList"
                     @ref="@_gridRef"
                     Pageable
                     @bind-PageSize="@_pageSize"
                     R_ConductorGridSource="@_conGridCustomerRef"
                     AllowAddNewRow
                     AllowEditRow
                     AllowDeleteRow
                     Height="300px"
                     R_ServiceGetListRecord="@Grid_ServiceGetListRecord"
                     R_BeforeAdd="@Grid_BeforeAdd"
                     R_AfterAdd="@Grid_AfterAdd"
                     R_BeforeEditCell="@Grid_BeforeEditCell"
                     R_BeforeDelete="@Grid_BeforeDelete"
                     R_AfterDelete="@Grid_AfterDelete"
                     R_BeforeSaveBatch="@Grid_R_BeforeSaveBatch"
                     R_ServiceSaveBatch="@Grid_R_ServiceSaveBatch"
                     R_AfterSaveBatch="@Grid_R_AfterSaveBatch"
                     AllowBulkDelete
                     R_BulkDelete="@Grid_R_BulkDelete"
                     R_CheckGridAdd="R_CheckGridAdd"
                     R_CheckGridEdit="R_CheckGridEdit"
                     R_CheckGridDelete="R_CheckGridDelete"
                     R_CheckBoxSelectValueChanged="R_CheckBoxSelectValueChanged"
                     R_DisableDeleteConfirmation="false">
        @* R_RowRender="@R_RowRender" *@
        <R_GridColumns>
            @* <R_GridCheckBoxSelectColumn FieldName="@nameof(CustomerDTO.Selected)" ShowSelectAllHeader
                                        Width="100px" /> *@
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.Id)"
                              HeaderText="Customer Id"
                              Width="100px" />
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.CompanyName)"
                              HeaderText="Company Name"
                              Width="400px"
                              Ellipsis />
            @* R_CellRender="@R_CellRender" *@
            <R_GridComboBoxColumn Data=@CustomerViewModel.Genders
                                  ValueField="@nameof(GenderDTO.Id)"
                                  TextField="@nameof(GenderDTO.Name)"
                                  FieldName="@nameof(CustomerDTO.GenderId)"
                                  HeaderText="Gender Id"
                                  Width="200px" />
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.ContactName)"
                              HeaderText="Contact Name"
                              Width="400px"
                              Ellipsis />
        </R_GridColumns>
    </R_BatchEditGrid>
</R_StackLayout>

<R_Grid DataSource="@CustomerViewModel.SavedData"
        R_GridType="R_eGridType.Original"
        Height="200px">
    <R_GridColumns>
        <R_GridTextColumn FieldName="@nameof(CustomerDTO.Id)"
                          HeaderText="Customer Id"
                          Width="100px" />
        <R_GridTextColumn FieldName="@nameof(CustomerDTO.CompanyName)"
                          HeaderText="Company Name"
                          Width="400px"
                          R_CellRender="@R_CellRender"
                          Ellipsis />
        <R_GridLookupColumn FieldName="@nameof(CustomerDTO.ProductId)"
                            HeaderText="Product Id"
                            Width="200px" />
        <R_GridTextColumn FieldName="@nameof(CustomerDTO.ProductName)"
                          Width="200px"
                          HeaderText="Product Name" />
        <R_GridComboBoxColumn Data=@CustomerViewModel.Genders
                              ValueField="@nameof(GenderDTO.Id)"
                              TextField="@nameof(GenderDTO.Name)"
                              FieldName="@nameof(CustomerDTO.GenderId)"
                              HeaderText="Gender Id"
                              Width="200px" />
        <R_GridTextColumn FieldName="@nameof(CustomerDTO.ContactName)"
                          HeaderText="Contact Name"
                          Width="400px"
                          Ellipsis />
    </R_GridColumns>
</R_Grid>

<R_ConductorGrid @ref="@_conGridCustomerRef"
                 R_IsHeader />

@*
    List of Available Public Method dari grid
    
    _gridRef.AddAsync();
    _gridRef.EditAsync();
    _gridRef.DeleteAsync();
    _gridRef.SaveAsync();
    _gridRef.CancelAsync();

    _gridRef.GetFilteredGridData();
    _gridRef.R_SelectCurrentDataAsync();

    
    List<R_GridGroupDescriptor> loGroups = new List<R_GridGroupDescriptor>();
    loGroups.Add(new R_GridGroupDescriptor()
    {
        FieldName = "GenderId"
    });
    await _gridRef.R_GroupBy(loGroups);
*@

<style>
    .k-grid .k-master-row.myCustomRowFormatting:hover {
        background-color: #0d6efd !important;
        color: white;
    }

    .k-grid .k-master-row.myCustomRowFormatting {
        background-color: indianred;
        color: white !important
    }

    .k-grid .k-table-row.k-selected.myCustomRowFormatting > .k-table-td {
        color: white !important;
    }


    .myCustomCellFormatting {
        background-color: hotpink;
        color: white;
    }

</style>
