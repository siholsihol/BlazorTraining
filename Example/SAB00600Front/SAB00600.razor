@page "/SAB00600"
@inherits R_Page
@attribute [R_Page(Title = "Gridview Original")]
@using R_BlazorFrontEnd.Controls.Events

<R_StackLayout>
    <R_Grid DataSource="@CustomerViewModel.CustomerList"
            @ref="@_gridRef"
            Pageable
            @bind-PageSize="@_pageSize"
            R_GridType="@R_eGridType.Original"
            R_ConductorGridSource="@_conGridCustomerRef"
            AllowAddNewRow
            AllowEditRow
            AllowDeleteRow
            Height="300px"
            R_ServiceGetListRecord="@Grid_ServiceGetListRecord"
            R_ServiceGetRecord="@Grid_ServiceGetRecord" 
            R_Display="R_Display" 

            R_CheckGridAdd="R_CheckGridAdd" 
            R_CheckGridEdit="R_CheckGridEdit" 
            R_CheckGridDelete="R_CheckGridDelete"

            R_SetAddGridColumn="@R_SetAddGridColumn"
            R_SetEditGridColumn="@R_SetEditGridColumn"

            R_CellValueChanged="@R_CellValueChanged"
            R_CellLostFocused="@R_CellLostFocus"

            R_Before_Open_Grid_Lookup="R_Before_Open_Grid_Lookup"
            R_After_Open_Grid_Lookup="R_After_Open_Grid_Lookup"
            R_RowRender="@R_RowRender"

            R_CheckAdd="R_CheckAdd" 
            R_CheckEdit="R_CheckEdit" 
            R_CheckDelete="R_CheckDelete" 

            R_BeforeAdd="@Grid_BeforeAdd" 
            R_BeforeEdit="@Grid_BeforeEdit" 
            R_BeforeDelete="@Grid_BeforeDelete" 
            R_BeforeCancel="@Grid_BeforeCancel" 
            R_Validation="@Grid_Validation" 
            R_Saving="@Grid_Saving" 
            
            R_AfterAdd="@Grid_AfterAdd" 
            
            R_ServiceSave="@Grid_ServiceSave" 
            R_AfterSave="@Grid_AfterSave" 
            
            R_ServiceDelete="@Grid_ServiceDelete" 
            R_AfterDelete="@Grid_AfterDelete" 

            R_DisableDeleteConfirmation="false"
            R_DisableCancelConfirmation
            >
        <R_GridColumns>
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.Id)"
                              HeaderText="Customer Id"
                              R_EnableAdd
                              Width="100px" />
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.CompanyName)"
                              HeaderText="Company Name"
                              R_EnableAdd
                              R_EnableEdit
                              Width="400px" 
                              PrefixText="@_prefixText"
                              SuffixText="@_suffixText"
                              Ellipsis />
                              @* R_CellRender="@R_CellRender" *@
            <R_GridLookupColumn FieldName="@nameof(CustomerDTO.ProductId)"
                                HeaderText="Product Id"
                                Width="200px"
                                R_EnableAdd
                                R_EnableEdit
                                TextboxEnabled />
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.ProductName)"
                              Enabled="false"
                              Width="200px"
                              HeaderText="Product Name" /> 
            <R_GridComboBoxColumn Data=@CustomerViewModel.Genders
                                  ValueField="@nameof(GenderDTO.Id)"
                                  TextField="@nameof(GenderDTO.Name)"
                                  FieldName="@nameof(CustomerDTO.GenderId)"
                                  HeaderText="Gender Id"
                                  Enabled="@_checkBoxValue"
                                  Width="200px" />
            <R_GridTextColumn FieldName="@nameof(CustomerDTO.ContactName)"
                              HeaderText="Contact Name"
                              R_EnableAdd="@_checkBoxValue"
                              Visible="@_isContactNameColumnVisible" 
                              Width="400px" 
                              Ellipsis />
        </R_GridColumns>
    </R_Grid>

    <R_StackLayout Row>
        <R_CheckBox @bind-Value="@_checkBoxValue"></R_CheckBox>
        <R_Label>Enable Field Contact Name</R_Label>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_CheckBox @bind-Value="@_isContactNameColumnVisible"></R_CheckBox>
        <R_Label>Show Field Contact Name</R_Label>
    </R_StackLayout>

    <R_StackLayout Row>
        @if (_isAddNewRowVisible)
        {
            <R_Button OnClick="@OnClick">Save</R_Button>
        }
        else
        {
            <R_Button OnClick="@OnClick">Update</R_Button>
        }
    </R_StackLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conGridCustomerRef"
                 R_IsHeader />

@*
    List of Available Public Method dari grid
    
    _gridRef.AddAsync();
    _gridRef.EditAsync();
    _gridRef.DeleteAsync();
    _gridRef.SaveAsync();
    _gridRef.CancelAsync();

    _gridRef.GetFilteredGridData();
    _gridRef.R_SelectCurrentDataAsync();

    
    List<R_GridGroupDescriptor> loGroups = new List<R_GridGroupDescriptor>();
    loGroups.Add(new R_GridGroupDescriptor()
    {
        FieldName = "GenderId"
    });
    await _gridRef.R_GroupBy(loGroups);
*@

<style>
    .k-grid .k-master-row.myCustomRowFormatting:hover {
        background-color: #0d6efd !important;
        color: white;
    }

    .k-grid .k-master-row.myCustomRowFormatting {
        background-color: indianred;
        color: white !important
    }

    .k-grid .k-table-row.k-selected.myCustomRowFormatting > .k-table-td {
        color: white !important;
    }


    .myCustomCellFormatting {
        background-color: hotpink;
        color: white;
    }

</style>
