@page "/SAB03000"
@using R_BlazorFrontEnd.Controls.DataControls
@inherits R_Page

<R_TabStrip @ref="@tabStripRef"
            OnActiveTabIndexChanging="@OnActiveTabIndexChanging"
            OnActiveTabIndexChanged="@OnActiveTabIndexChanged">
    <R_TabStripTab Title="Tab 1" Id="Tab1">
        Tab 1
    </R_TabStripTab>

    <R_TabStripTab Title="Tab 2" Id="Tab2">
        Tab 2
    </R_TabStripTab>

    <R_TabStripTab Title="Tab 3" Id="Tab3">
        Tab 3
    </R_TabStripTab>
</R_TabStrip>

<R_TextBox @bind-Value="@sAB03000ViewModel.Data.Name"/>

<R_Button OnClick="@OnClick">Set Active Tab 3</R_Button>
<R_Button OnClick="@OnClickPredefined">Enable Disable Predefined</R_Button>

<R_PredefinedDock R_InstantiateDock="@R_InstantiateDock"
                  Title="Tab Page"
                  Enabled="@predefinedEnabled" />

<R_AddButton R_Conductor="@_conductorRef" />
<R_EditButton R_Conductor="@_conductorRef" />
<R_DeleteButton R_Conductor="@_conductorRef" />
<R_SaveButton R_Conductor="@_conductorRef" />
<R_CancelButton R_Conductor="@_conductorRef" />
<R_PrintButton R_Conductor="@_conductorRef" />

<R_Conductor @ref="@_conductorRef" R_IsHeader R_ViewModel="@sAB03000ViewModel" R_ServiceGetRecord="@GetRecord" R_Display="@R_Display" />

@code{
    private R_TabStrip tabStripRef;
    private bool predefinedEnabled = true;

    private R_Conductor _conductorRef;
    private SAB03000ViewModel sAB03000ViewModel = new SAB03000ViewModel();

    protected override async Task R_Init_From_Master(object poParameter)
    {
        await _conductorRef.R_GetEntity(null);
        await base.R_Init_From_Master(poParameter);
    }

    private void OnActiveTabIndexChanging(R_TabStripActiveTabIndexChangingEventArgs eventArgs)
    {
        //if (eventArgs.TabStripTab.Id == "Tab2")
        //    eventArgs.Cancel = true;
    }

    private async Task OnClick()
    {
        await tabStripRef.SetActiveTabAsync("Tab3");
    }

    private void OnActiveTabIndexChanged(R_TabStripTab tabStripTab)
    {

    }

    private void R_InstantiateDock(R_InstantiateDockEventArgs eventArgs)
    {
        eventArgs.TargetPageType = typeof(SAB03000TabPage);
    }

    private void OnClickPredefined()
    {
        predefinedEnabled = !predefinedEnabled;
    }

    private void GetRecord(R_ServiceGetRecordEventArgs eventArgs)
    {
        sAB03000ViewModel.GetData();
        eventArgs.Result = sAB03000ViewModel.dto;
    }


    private void R_Display(R_DisplayEventArgs eventArgs)
    {

    }
}